---
import { getCollection } from 'astro:content';
import HubLayout from '../../../layouts/HubLayout.astro';

export async function getStaticPaths() {
  const allKnowledge = await getCollection('knowledge');
  return allKnowledge.map(note => ({
    params: { slug: note.slug },
    props: { note },
  }));
}

const { note } = Astro.props;
const { Content } = await note.render();
---

<HubLayout title={note.data.title}>
  <article class="doc-content">
    <header class="doc-meta">
      <div class="meta-row">
        <span class="label">Category:</span>
        <span class="value text-mono">{note.data.category}</span>
      </div>
      <div class="meta-row">
        <span class="label">Tags:</span>
        <span class="value text-mono">
          {note.data.tags?.join(', ') || 'None'}
        </span>
      </div>
    </header>

    <div class="markdown-body">
      <Content />
    </div>
  </article>
</HubLayout>

<style>
  .doc-meta {
    background: var(--c-paper);
    padding: 1rem;
    border: 1px solid var(--c-border);
    margin-bottom: 3rem;
    font-size: 0.9rem;
  }
  
  .meta-row { display: flex; gap: 1rem; margin-bottom: 0.5rem; }
  .meta-row:last-child { margin-bottom: 0; }
  .label { font-weight: 600; color: var(--c-ink-light); min-width: 80px; }
  .value { color: var(--c-navy); }

  .markdown-body {
    font-size: 1.05rem;
  }
  /* Specific Markdown overrides for readability */
  .markdown-body :global(h2) { margin-top: 3rem; }
  .markdown-body :global(ul) { padding-left: 1.5rem; margin-bottom: 1.5rem; }
  .markdown-body :global(li) { margin-bottom: 0.5rem; }
  .markdown-body :global(blockquote) {
    border-left: 3px solid var(--c-navy);
    padding-left: 1rem;
    color: var(--c-ink-light);
    margin: 2rem 0;
  }
</style>
