---
import { getCollection } from 'astro:content';
import HubLayout from '../../../layouts/HubLayout.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<HubLayout title={post.data.title}>
  <article class="doc-content">
    <header class="doc-meta">
      <time class="text-mono">{post.data.date.toLocaleDateString()}</time>
      <div class="tags text-mono text-small">
        {post.data.tags?.join(', ')}
      </div>
    </header>

    <div class="markdown-body">
      <Content />
    </div>
  </article>
</HubLayout>

<style>
  .doc-meta {
    margin-bottom: 3rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--c-border);
    color: var(--c-ink-light);
  }
  
  .markdown-body {
    font-size: 1.05rem;
  }
  /* Reusing markdown styles from global/knowledge for consistency */
  .markdown-body :global(pre) {
    background: var(--c-code-bg);
    border: 1px solid var(--c-border);
  }
</style>
